<!DOCTYPE html>
<html lang="en-US" data-theme="light">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>10-4 to the Ten64 with Rockstor - hpc.social - Aggregated Personal Blog</title>
        <meta name="description" content="Shared personal experiences and stories">
        <meta name="keywords" content="">
        <base href="https://hpc.social/personal-blog" />
        
        <meta content="2021-09-26T17:55:00-06:00" property="article:published_time">
        <meta content="https://hpc.social/about/" property="article:author">
          
        <meta property="og:site_name" content="hpc.social - Aggregated Personal Blog">
        <meta property="og:type" content="article" />
        <meta property="og:url" content="https://hpc.social/personal-blog/2021/10-4-to-the-ten64-with-rockstor/"/>
        <meta property="og:title" content="10-4 to the Ten64 with Rockstor - hpc.social - Aggregated Personal Blog" />
        <meta property="og:description" content="Shared personal experiences and stories" />
        <meta property="og:image" content="https://hpc.social/personal-blog/assets/images/hpc-social-blue.png"/>
        <meta name="twitter:site" content="@hpc_social" />
        <meta name="twitter:creator" content="@hpc_social" /> 
        <meta name="twitter:card" content="summary"/>
        <meta property="twitter:title" content="10-4 to the Ten64 with Rockstor - hpc.social - Aggregated Personal Blog" />
        <meta property="twitter:description" content="Shared personal experiences and stories" />
        <meta property="twitter:image" content="https://hpc.social/personal-blog/assets/images/hpc-social-blue.png" />
        <link rel="stylesheet" href="/personal-blog/assets/css/highlight.css">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Catamaran:wght@300&display=swap" rel="stylesheet"> 

        <link rel="stylesheet" href="/personal-blog/assets/css/style.css">
        <link rel="shortcut icon" href="/personal-blog/assets/images/hpc-social-blue.png" />
        <link rel="alternate" type="application/atom+xml" title="hpc.social - Aggregated Personal Blog" href="https://hpc.social/personal-blog/atom.xml">
        <link rel="alternate" type="application/json" title="hpc.social - Aggregated Personal Blog" href="https://hpc.social/personal-blog/feed.json" />
        <link rel="sitemap" type="application/xml" title="sitemap" href="https://hpc.social/personal-blog/sitemap.xml" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","author":{"@type":"Person","name":"hpc.social"},"description":"Shared personal experiences and stories","headline":"hpc.social - Aggregated Personal Blog","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://hpc.social/personal-blog/assets/images/hpc-social-blue.png"},"name":"hpc.social"},"sameAs":["https://twitter.com/","https://github.com/"],"url":"https://hpc.social/personal-blog"}</script>
    </head>
<body>

<div class="container">
	<div class="profile">
		<a href="https://hpc.social/personal-blog/"><img src="/personal-blog/assets/images/hpc-social-blue.png" class="profile-image"></a>
		<div class="profile-about">
			<h2 style="margin-bottom: 0; font-weight: 700;">hpc.social</h2>
			
			
				<a href="https://twitter.com/hpc_social" target="_blank"><img src="/personal-blog/assets/images/icon/twitter.svg" class="social-icon"></a>
			
			
			
			
				<a href="https://github.com/hpc-social" target="_blank"><img src="/personal-blog/assets/images/icon/github.svg" class="social-icon"></a>
			
			
			<a href="/personal-blog/about/"><img src="/personal-blog/assets/images/icon/me.svg" class="social-icon"></a>
			<br>
			High Performance Computing <br> Practitioners <br> and friends /#hpc
			<br>
			<div class="mode" id="mode-switcher" onclick="toggleNightMode();">
				<span></span>
			</div>
		</div>
	</div>
	
<div class="post-header">
	<div class="post-date">26.09.2021  &middot; <span class="reading-time" title="Estimated read time">
  
   7 mins  read </span>
</div>
	<div class="post-share">
		Share:&nbsp; 
		<a href="https://twitter.com/intent/tweet?source=tweetbutton&amp;original_referer=https://hpc.social/10-4-to-the-ten64-with-rockstor&amp;text=10-4 to the Ten64 with Rockstor - https://hpc.social/10-4-to-the-ten64-with-rockstor" target="_blank"><img src="https://hpc.social/personal-blog/assets/images/icon/twitter.svg" class="social-icon"></a>
	</div>
</div>

<div class="tags-container" style="padding:10px; font-size:18px; font-style:italic">
        This is a crosspost from &nbsp; <a target="_blank" href="https://www.gaborsamu.com/blog/">Blogs on Technical Computing Goulash</a>&nbsp;Recent content in Blogs on Technical Computing Goulash.&nbsp;See the original post&nbsp;<a target="_blank" href="https://www.gaborsamu.com/blog/ten64_nas/">here</a>.</div>

<div class="blog-post-content">
	<h1>10-4 to the Ten64 with Rockstor</h1>
	<p>I love it when a plan comes together! And this time, I&rsquo;m not referring to a
daring rescue by the A-Team, but rather something just slightly more mundane -
network attached storage (NAS).</p>

<p>I wrote back in March of this year about my experience setting up an <a href="https://www.gaborsamu.com/blog/aarch64_nas/">Arm based
NAS</a> for home use running Rockstor on my venerable SolidRun macchiatoBIN board. Although the macchiatoBIN served
in this role well, one limiting factor is the 3 onboard SATA ports. When used
as a desktop, this wasn&rsquo;t an issue, but as a NAS it would limit things down
the road in terms of adding storage. Yes, I know I could have purchased a
PCIe SATA card to add additional ports, but decided against going this route
given the various foibles I encountered with PCIe support over the years with
the macchiatoBIN.</p>

<p>My mind had been set a number of months earlier to purchase a <a href="https://www.crowdsupply.com/traverse-technologies/ten64">Traverse Ten64</a> <em>network appliance</em>
and to use it primarily as a NAS. The Ten64 was attractive to me because of
it&rsquo;s expandability, ECC RAM support, abundance of network ports and an
interesting capability known as DPAA2, which is thanks to the use of
NXP Layerscape LS1088A processor. A little bit more about DPAA2 later in
the writeup. Furthermore, Ten64 could stand in for home router duties should my
(also venerable) Turris Omnia router decide to give up the ghost.</p>

<p>Through all of this, I heard the chants of QNAP and Synology from my friends,
who all thought that I was making things overly complicated for
myself. For me, it was a no brainer. The Ten64 would provide unprecedented
flexibilty and would give me a handy appliance which could take on NAS duties
as well as other tasks such as tinkering with K8s (k3s) clusters. And, who
could deny the additional cool factor of the red PCB of the Ten64!
Ultimately, I just love messing around with technology, and I&rsquo;m always looking
for unique and flexible solutions. Plug and play?  Nein Danke!</p>

<p>Back in March, after assessing that an Arm based NAS was indeed a workable
solution, I started to seek out the necessary bits and pieces in anticipation
of the arrival of the Ten64 board. Of course, with COVID still in the air
I was quite worried about being able to get all of the bits I needed in time.
Over the summer, I dilligently got all of the following pieces ready:</p>

<ul>
<li>1 x Kingston KSM268SE8/16ME 16GB DDR4 2666 MHz ECC SODIMM</li>
<li>1 x IOCrest IO-M2F585-5I M.2 B/M 5-port SATA controller</li>
<li>2 x Seagate Ironwolf 2 TB NAS drives</li>
<li>1 x Seagate Ironwolf 240 GB NAS SSD</li>
<li>1 x Fraktal Array R2 mini-ITX NAS case</li>
</ul>
<p>And the plan was coming slowly together.  At this stage only the Ten64 itself
was missing. And then, one fateful day in August the Ten64 arrived
at long last! And it was rock n' roll time. The <a href="https://ten64doc.traverse.com.au/">Traverse Ten64 online
documentation</a> and <a href="https://forum.traverse.com.au/">forum</a> turned out to be invaluable sources of information to help me
get up and running. In fact if you search the forum you&rsquo;ll find my name there
in a few threads, in particular around DPAA2, which was the most thorny issue
to resolve. Full disclosure that DPAA2 support in Linux distros is a bit hit
and miss.</p>

<p>The Ten64 shipped in it&rsquo;s own small form factor case. I setup the Ten64 on my
workbench and installed the RAM, M.2 SATA controller and connected the 240GB
SATA SSD. The end game was to get the system booting the openWrt based
<a href="https://gitlab.com/traversetech/muvirt">muvirt</a> from the 240GB SATA SSD and
to run Rockstor as a virtual machine under muvirt, with network interfaces
managed by DPAA2.</p>

<figure><img src="https://www.gaborsamu.com/images/ten64_collage.jpg" />
</figure>

<p>Once the software side of the house was figured out, it was time to install the
Ten64 board into the Fraktal NAS case. This is what is looked like during
the installation phase.</p>

<figure><img src="https://www.gaborsamu.com/images/ten64_case.jpg" />
</figure>

<p>There are tons of resources on NXP DPAA2 which can be found on the Internet.
The Ten64 online documentation includes a useful <a href="https://ten64doc.traverse.com.au/network/dpaa2overview/">overview and details</a>.
It&rsquo;s effectively a way that you can represent network objects on the NXP LS1088A processor of the Ten64 and pass those securely into the VM running on the
system - which in my case was going to be Rockstor running on an OpenSUSE LEAP 15.3 VM. With DPAA2 I can avoid using virtualized networking for the VMs for
better performance. Again, I&rsquo;m very far from being an authority on DPAA2,
but it was definitely an important selling point for me, given my use case.</p>

<p>DPAA2 took some effort to get working, but I&rsquo;m very pleased with the outcome.
Ultimately, it required updated versions of muvirt, re-compilation of the VM
guest kernel to include the necessary DPAA2 patches and to flash a
<a href="https://gitlab.com/dubito/dpl-examples">new data path layout to the Ten64 board</a>. You can find all of the nitty-gritty details about this in the following
Ten64 <a href="https://forum.traverse.com.au/t/restool-in-muvirt/63/23">forum thread</a>.</p>

<p>Here is a view of the Rockstor dashboard showing activity on the system.
I&rsquo;m a fan of the dashboard as it gives important details at a glance about
the state of the NAS.</p>

<figure><img src="https://www.gaborsamu.com/images/rockstor_dashboard.png" />
</figure>

<p>So what does the future hold? At the moment I&rsquo;m migrating data to the
Rockstor NAS. I&rsquo;ve not done extensive performance tests, but suffice it to
say that the performance reading/writing to the NAS is as I would expect
with Gigabit Ethernet. I&rsquo;ve installed both Jellyfin and Netdata rock-ons
as well to provide media server capabilities and detailed metrics on
the system load. I anticipate that I&rsquo;ll be looking more closely at
k3s in the coming weeks.</p>

<p>So this is bit of a pat myself on the back moment. I&rsquo;m very pleased with
the outcome and the capabilities of the Ten64 now and the room it will
provide to grow in the future. And what also matters to me is that in the
end, I did it my way.</p>

</div>
<div class="tags-container">
	
</div>
<style>
#uppy {
  position: fixed;
  bottom: 50px;
  right: 50px;
  z-index: 99;
  border: none;
  outline: none;
  background-color: darkturquoise;
  color: black;
  cursor: pointer;
  margin:15px;
  border-radius: 10px;
  width: 100px;
  height: 20px;
}

#returnTop:hover {
  background-color: #555;
}
</style>

<button id="uppy" title="Return to Top" class="btn btn-lg">Back to top</button>

<script>
(function() {

var scrollTop = function() {
    window.scrollTo(0, 0);
};

document.getElementById('uppy').onclick = scrollTop;

})();
</script>


<div class="navigation">
	
		<a class="prev" href="/personal-blog/2021/uptodate/">< Uptodate</a>
	 
	<a class="next" href="/personal-blog/2021/iops-are-dumb/">IOPS are dumb ></a>

</div>

	<div class="footer">
		<span style="padding-right:10px"><font color="red">©️ </font><a href="https://hpc.social"><b>hpc.social</b> community</a></span> 
		| <a style="padding-left:10px; padding-right:10px" href="/personal-blog/archive/">Archive</a>
		| <a style="padding-left:10px; padding-right:10px" href="/personal-blog/">Posts</a>
		| <a style="padding-left:10px; padding-right:10px" href="/personal-blog/about/">About</a>
		| <a style="padding-left:10px; padding-right:10px" href="https://hpc.social/blog">hpc.social blogs</a>
		| <a style="padding-left:37%;" target="_blank" href="https://github.com/hpc-social/personal-blog">Add Your Blog</a>
	</div>
</div>
    <script src="/personal-blog/assets/scripts.js"></script>
    <script type="text/javascript">
        if (localStorage.theme === 'light') {
            document.documentElement.setAttribute('data-theme', 'light');
            document.getElementById('mode-switcher').classList.add('active');
        } else if (localStorage.theme === 'dark' || localStorage.theme === '' || (!('theme' in localStorage))) {
            document.documentElement.setAttribute('data-theme', 'dark');
            document.getElementById('mode-switcher').classList.add('active');
        }
    </script>
</body>
</html>

